[{"D:\\CaroOnline\\src\\front-end\\src\\index.js":"1","D:\\CaroOnline\\src\\front-end\\src\\App.js":"2","D:\\CaroOnline\\src\\front-end\\src\\components\\demoRealtime.js":"3","D:\\CaroOnline\\src\\front-end\\src\\components\\Login\\index.js":"4","D:\\CaroOnline\\src\\front-end\\src\\components\\Home\\index.js":"5","D:\\CaroOnline\\src\\front-end\\src\\components\\Register\\index.js":"6","D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\index.js":"7","D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\square.js":"8","D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\chat.js":"9","D:\\CaroOnline\\src\\front-end\\src\\api\\userApi.js":"10","D:\\CaroOnline\\src\\front-end\\src\\api\\axiosClient.js":"11","D:\\CaroOnline\\src\\front-end\\src\\webSocketClient.js":"12","D:\\CaroOnline\\src\\front-end\\src\\components\\CheckMail\\index.js":"13","D:\\CaroOnline\\src\\front-end\\src\\components\\MailValidate\\index.js":"14","D:\\CaroOnline\\src\\front-end\\src\\components\\Profile\\index.js":"15"},{"size":256,"mtime":1608290034436,"results":"16","hashOfConfig":"17"},{"size":7313,"mtime":1608905806732,"results":"18","hashOfConfig":"17"},{"size":2850,"mtime":1607523969386,"results":"19","hashOfConfig":"17"},{"size":3873,"mtime":1608398543785,"results":"20","hashOfConfig":"17"},{"size":9315,"mtime":1608905806734,"results":"21","hashOfConfig":"17"},{"size":4526,"mtime":1608394987040,"results":"22","hashOfConfig":"17"},{"size":3799,"mtime":1608812233278,"results":"23","hashOfConfig":"17"},{"size":302,"mtime":1608282954454,"results":"24","hashOfConfig":"17"},{"size":2898,"mtime":1608404973147,"results":"25","hashOfConfig":"17"},{"size":3067,"mtime":1608905806732,"results":"26","hashOfConfig":"17"},{"size":1023,"mtime":1608282954373,"results":"27","hashOfConfig":"17"},{"size":1285,"mtime":1608297276036,"results":"28","hashOfConfig":"17"},{"size":765,"mtime":1608374402715,"results":"29","hashOfConfig":"17"},{"size":2009,"mtime":1608450297084,"results":"30","hashOfConfig":"17"},{"size":4833,"mtime":1608905806735,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"112nzf5",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"40"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"34"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"34"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"34"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"34"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\CaroOnline\\src\\front-end\\src\\index.js",[],["72","73"],"D:\\CaroOnline\\src\\front-end\\src\\App.js",[],"D:\\CaroOnline\\src\\front-end\\src\\components\\demoRealtime.js",["74","75"],"import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n// WEBSOCKET CLIENT SIDE\r\nconst ws = (() => {\r\n    // private\r\n    // singleton instance\r\n    let ws = undefined;\r\n    let lazyUpdate = {};\r\n\r\n    // public\r\n    function createConnection(userId, callback) {\r\n        destroyConnection();\r\n        ws = new WebSocket(\"ws://localhost:3001?userId=\" + userId);\r\n        ws.addEventListener(\"message\", ({ data: message }) => {\r\n            let topicName = message.split(\">>>\")[0];\r\n            if (lazyUpdate[topicName] > 0)\r\n                lazyUpdate[topicName] -= 1;\r\n            else\r\n                callback();\r\n        });\r\n    }\r\n\r\n    function destroyConnection() {\r\n        if (ws)\r\n            ws.close();\r\n        ws = undefined;\r\n    }\r\n\r\n    function notifyChange(topicName) {\r\n        ws.send(`${topicName}>>>changed`);\r\n        lazyUpdate[topicName] = (lazyUpdate[topicName] | 0) + 1;\r\n    }\r\n\r\n    return {\r\n        createConnection,\r\n        destroyConnection,\r\n        notifyChange\r\n    }\r\n})();\r\n\r\n// API\r\nasync function getActiveUsers() {\r\n    let response = await fetch('http://localhost:3001/active-users');\r\n    response = await response.json();\r\n    return response;\r\n}\r\n\r\n// HELPERS\r\nfunction refreshConnection(e, userId, setActiveUsers) {\r\n    if (e.charCode != 13)\r\n        return;\r\n    // when user press enter\r\n    // renew connection with new userId\r\n    ws.createConnection(userId,async ()=>{\r\n        // load list of active users\r\n        let activeUsers = await getActiveUsers();\r\n        setActiveUsers(activeUsers);\r\n    });\r\n}\r\n\r\nexport default function DemoRealtime(props) {\r\n    const [activeUsers, setActiveUsers] = useState([]);\r\n    const [userId, setUserId] = useState('');\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n         \r\n        // if the user is not authorized, redirect to login page\r\n        if (!token) { // TODO\r\n            history.push('/signin');\r\n            return;\r\n        }\r\n\r\n        (async () => {\r\n            // load list of active users\r\n            let activeUsers = await getActiveUsers();\r\n            setActiveUsers(activeUsers);\r\n        })();\r\n    }, []);\r\n\r\n    let listItems=[];\r\n    for (let userId in activeUsers) {\r\n        listItems.push(\r\n            <li key={userId}>\r\n                {userId}\r\n            </li>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <p>User id:</p>\r\n            <input\r\n                type=\"text\"\r\n                onChange={e => setUserId(e.target.value)}\r\n                onKeyPress={e => refreshConnection(e, userId, setActiveUsers)}\r\n            ></input>\r\n            <hr/>\r\n            <p>Active users:</p>\r\n            <ul>\r\n                {listItems}\r\n            </ul>\r\n        </div>\r\n    );\r\n}",["76","77"],"D:\\CaroOnline\\src\\front-end\\src\\components\\Login\\index.js",["78","79"],"import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar, Button, CssBaseline, TextField, Typography, makeStyles, Container } from '@material-ui/core';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport api from '../../api/userApi';\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nexport default function Login(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n\n    const token = localStorage.getItem(\"token\");\n    const handleChangeLoginStatus = props.handleChangeLoginStatus;\n\n    useEffect(() => {\n        if (token) { // TODO\n            history.push('/');\n        }\n    }, [])\n\n    const handleUsernameChange = (e) => {\n        setUsername(e.target.value);\n    }\n\n    const handlePasswordChange = (e) => {\n        setPassword(e.target.value);\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        let response = await api.login(username, password);\n        if (response.message) {\n            if (response.message == 'Invalid') {\n                alert(\"Username or password is not correct. Please try again!\");\n            } else {\n                alert(\"Check out your email to validate this account!\");\n            }\n            history.push('/signin');\n        } else {\n            const data = response.data;\n            localStorage.setItem(\"token\", data.token);\n            localStorage.setItem(\"username\", data.user.username)\n            handleChangeLoginStatus();\n            alert('Successfully loged in. Welcome to Home!');\n            history.push('/');\n        }\n    }\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    Sign in\n                </Typography>\n                <form method=\"POST\" className={classes.form} onSubmit={handleSubmit}>\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"userName\"\n                        label=\"Username\"\n                        name=\"username\"\n                        onChange={handleUsernameChange}\n                        autoFocus\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        onChange={handlePasswordChange}\n                        autoComplete=\"current-password\"\n                    />\n                    <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                    >\n                        Sign In\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n}","D:\\CaroOnline\\src\\front-end\\src\\components\\Home\\index.js",["80","81","82","83","84","85","86"],"import React, { useEffect, useState } from 'react';\r\nimport './index.css';\r\nimport ws from '../../webSocketClient';\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\nimport { useHistory } from 'react-router-dom';\r\nimport api from '../../api/userApi';\r\nimport {\r\n    Grid, Container, Button, TextField, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle,\r\n    Card, CardActionArea, CardActions, CardContent, Typography\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    heroContent: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(8, 0, 6),\r\n    },\r\n    heroButtons: {\r\n        marginTop: theme.spacing(4),\r\n    },\r\n    cardGrid: {\r\n        paddingTop: theme.spacing(8),\r\n        paddingBottom: theme.spacing(8),\r\n    },\r\n    card: {\r\n        height: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    cardMedia: {\r\n        paddingTop: '56.25%', // 16:9\r\n    },\r\n    cardContent: {\r\n        flexGrow: 1,\r\n    },\r\n    footer: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(6),\r\n    },\r\n}));\r\n\r\nconst boardsList = boards => (\r\n    boards.map((board) => {\r\n        return (\r\n            <BoardItem key={board.boardId}\r\n                boardItem={board} />\r\n        );\r\n    })\r\n);\r\n\r\nconst usersList = users => (\r\n    users.map(user => {\r\n        return (\r\n            <UserItem key={user.username} user={user} />\r\n        );\r\n    })\r\n);\r\n\r\nexport default function Home() {\r\n    const classes = useStyles();\r\n    const [users, setUsers] = useState([]);\r\n    const [boards, setBoards] = useState([]);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            // call API and get boards\r\n            let response = await api.getAllBoards();\r\n            if (response.message) {\r\n                history.push('/signin');\r\n                return;\r\n            }\r\n            // set boards list\r\n            setBoards(response);\r\n            // init web socket client\r\n            ws.createConnection(localStorage.getItem('username'), (topicName) => {\r\n                let callbacks = {\r\n                    general: function () {\r\n                        let needToRefresh = topicName.split('-')[1];\r\n                        switch (needToRefresh) {\r\n                            case \"users\": {\r\n                                (async () => {\r\n                                    let arr = await api.getUsers();\r\n                                    setUsers(arr);\r\n                                })();\r\n                                break;\r\n                            }\r\n                            case \"boards\": {\r\n                                (async () => {\r\n                                    let arr = await api.getAllBoards();\r\n                                    setBoards(arr);\r\n                                })();\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                let arr = topicName.split('>>>')[0];\r\n                arr = arr.split('-');\r\n                let topic = arr[0];\r\n                if (callbacks[topic]) {\r\n                    callbacks[topic]();\r\n                }\r\n            });\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <main>\r\n            <div className=\"home-container\">\r\n                <div>\r\n                    <Container className={classes.cardGrid} maxWidth=\"md\">\r\n                        <Grid container spacing={4}>\r\n                            <Grid item xs={12} sm={4} md={4}>\r\n                                <AddBoardDialog callback={setBoards} />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Container>\r\n                    <Container className={classes.cardGrid} maxWidth=\"md\">\r\n                        <Grid container spacing={4}>\r\n                            {boardsList(boards)}\r\n                        </Grid>\r\n                    </Container>\r\n                </div>\r\n                <div className=\"users-list\">\r\n                    {usersList(users)}\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n\r\nfunction BoardItem(props) {\r\n    const classes = useStyles();\r\n    const board = props.boardItem;\r\n    const history = useHistory();\r\n\r\n    async function joinGame() {\r\n        if (!board.userId1 || !board.userId2) {\r\n            // join game\r\n            if (board.userId1 != localStorage.getItem('username') && board.userId2 != localStorage.getItem('username'))\r\n                await api.joinBoard(board.boardId);\r\n        } else if (board.userId1 && board.userId2)\r\n            if (board.userId1 != localStorage.getItem('username') && board.userId2 != localStorage.getItem('username'))\r\n                return;\r\n        history.push(`/board?id=${board.boardId}`);\r\n    }\r\n\r\n    return (\r\n        <Grid item xs={12} sm={6} md={4}>\r\n            <Card variant=\"outlined\" className={classes.card}>\r\n                {/* <Link style={{ textDecoration: 'none', color: 'black' }} to={`/boards/${board.id}`}> */}\r\n                <CardActionArea>\r\n                    <CardContent className={classes.cardContent}>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                            {board.name}\r\n                        </Typography>\r\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                            {board.boardId}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                            {board.userId1}\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                            {board.userId2}\r\n                        </Typography>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                {/* </Link> */}\r\n                <CardActions >\r\n                    <Button variant=\"outlined\" color=\"primary\" onClick={joinGame}>\r\n                        JOIN GAME\r\n                </Button>\r\n                </CardActions>\r\n            </Card>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nfunction UserItem(props) {\r\n    const user = props.user;\r\n\r\n    let statusColor = (user.isActive ? \"#00ff00\" : \"#aaaaaa\");\r\n\r\n    return (\r\n        <div className=\"user-item\">\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}><FiberManualRecordIcon style={{ color: statusColor }} /></div>\r\n            <div style={{ marginLeft: \"5px\", display: \"flex\", alignItems: \"center\" }}>{user.username}</div>\r\n            <div style={{ flexGrow: 1 }}></div>\r\n            <button \r\n                style={{ \r\n                    width: \"4rem\", \r\n                    margin: \"5px\", \r\n                    ...(user.username==localStorage.getItem('username') ? {display: \"none\"} : {}) \r\n                }} \r\n                disabled={!user.isActive}\r\n            >Invite</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AddBoardDialog(props) {\r\n    const [open, setOpen] = React.useState(false);\r\n    const [nameText, setNameText] = React.useState('');\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setNameText('');\r\n    };\r\n\r\n    const handleNameChange = (e) => {\r\n        setNameText(e.target.value);\r\n    };\r\n\r\n    async function createNewBoard(e) {\r\n        handleClose();\r\n        await api.createBoard(nameText, nameText);\r\n        ws.notifyChange('boards');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\r\n                New game\r\n            </Button>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">Create game</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        To create a new game, please fill out board's name in the box.\r\n                    </DialogContentText>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"name\"\r\n                        label=\"Name\"\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        onChange={handleNameChange}\r\n                    />\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\">\r\n                            Cancel\r\n                            </Button>\r\n                        <Button type=\"submit\" color=\"primary\" onClick={createNewBoard}>\r\n                            Create\r\n                            </Button>\r\n                    </DialogActions>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}","D:\\CaroOnline\\src\\front-end\\src\\components\\Register\\index.js",[],"D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\index.js",["87","88"],"import React, { useEffect, useState } from 'react';\r\nimport Square from './square';\r\nimport Chat from './chat';\r\nimport './index.css';\r\nimport { useHistory } from 'react-router-dom';\r\nimport api from '../../api/userApi';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ws from '../../webSocketClient';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n}));\r\n\r\nconst boardSize = 3;\r\n\r\nconst renderSquare = (props) => {\r\n    // const winLine = props.winLine;\r\n    return (\r\n        <Square\r\n            value={props.value}\r\n            onClick={props.onClick}\r\n            // highlight={(winLine && winLine.includes(i))}\r\n        />\r\n    );\r\n}\r\n\r\nexport default function Board(props) {\r\n    const [board, setBoard] = useState({});\r\n    const [chat, setChat] = useState([]);\r\n    const boardId = (new URL(document.location)).searchParams.get('id');\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            // get board\r\n            const board = await api.getBoard(boardId);\r\n            if (board.message) {\r\n                history.push('/signin');\r\n                return;\r\n            }\r\n            setBoard(board);\r\n            // get chat\r\n            let chat=await api.getBoardChat(boardId);\r\n            setChat(chat);\r\n            // init web socket client\r\n            ws.createConnection(localStorage.getItem('username'),(topicName)=>{\r\n                let callbacks={\r\n                    chat: async function(){\r\n                        let newChat=await api.getBoardChat(boardId);\r\n                        setChat(newChat);\r\n                    },\r\n                    board: async function(){\r\n                        let board = await api.getBoard(boardId);\r\n                        setBoard(board);\r\n                    },\r\n                    general: function(){\r\n                        // TODO\r\n                    }\r\n                };\r\n                let arr=topicName.split('>>>')[0];\r\n                arr=arr.split('-');\r\n                let topic=arr[arr.length-1];\r\n                if (callbacks[topic]) {\r\n                    callbacks[topic]();\r\n                }\r\n            });\r\n            let topic=`${board.userId1}-${board.userId2}`;\r\n            ws.subscribeTopic(`${topic}-board`);\r\n            ws.subscribeTopic(`${topic}-chat`);\r\n        })();\r\n    }, []);\r\n\r\n    async function takeTurn(row, col){\r\n        await api.takeTurn(boardId,row,col);\r\n        ws.notifyChange(`${board.userId1}-${board.userId2}-board`);\r\n        let newBoard = await api.getBoard(boardId);\r\n        setBoard(newBoard);\r\n    }\r\n\r\n    function renderSquares() {\r\n        if (!board.boardId)\r\n            return;\r\n        let squares=board.history[board.history.length - 1].squares;\r\n        let jsx=[];\r\n        for (let i=0; i<boardSize; i++) {\r\n            let row=[];\r\n            for (let j=0; j<boardSize; j++) {\r\n                row.push(renderSquare({\r\n                    value: squares[i*boardSize+j],\r\n                    onClick: ()=>takeTurn(i,j)\r\n                }));\r\n            }\r\n            jsx.push(<div key={i} className=\"board-row\">{row}</div>);\r\n        }\r\n        return jsx;\r\n    }\r\n\r\n    // scroll to the bottom of chat frame\r\n    setTimeout(()=>{\r\n        let element = document.getElementById(\"listChat\");\r\n        element.scrollTop = element.scrollHeight;\r\n    },0);\r\n\r\n    return (\r\n        <div>\r\n            <div className='board-game'>\r\n                <div>\r\n                    {/* for history */}\r\n                </div>\r\n                <div >\r\n                    {renderSquares()}\r\n                </div>\r\n                <Chat boardId={boardId} chat={chat} topicName={`${board.userId1}-${board.userId2}-chat`}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}","D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\square.js",[],"D:\\CaroOnline\\src\\front-end\\src\\components\\Board\\chat.js",["89","90","91"],"import React, { useEffect, useState } from 'react';\nimport api from '../../api/userApi';\nimport './index.css';\nimport ws from '../../webSocketClient';\n\nconst Chat = (props) => {\n    const [msg,setMsg]=useState(\"\");\n\n    function getListChat(){\n        let chat=props.chat;\n        let jsx=[];\n        let username=localStorage.getItem('username');\n        for (let i=0; i<chat.length; i++){\n            if (chat[i].from==username){\n                jsx.push(\n                    <div key={chat[i].time} className='message-tag-right'>\n                        <div></div>\n                        <div \n                            style={{\n                                backgroundColor: \"#99eeee\", \n                                borderRadius: \"5px\",\n                                margin: \"10px\",\n                                boxSizing: \"border-box\",\n                                textAlign: \"left\",\n                                padding: \"10px\"\n                            }}>\n                            {chat[i].content}\n                        </div>\n                    </div>\n                );\n            } else {\n                jsx.push(\n                    <div key={chat[i].time} className='message-tag-left'>\n                        <div\n                            style={{\n                                backgroundColor: \"#cccccc\", \n                                borderRadius: \"5px\",\n                                margin: \"10px\",\n                                boxSizing: \"border-box\",\n                                textAlign: \"left\",\n                                padding: \"10px\"\n                            }}\n                        >\n                            {chat[i].content}\n                        </div>\n                    </div>\n                );\n            }\n        }\n        return jsx;\n    }   \n    \n    let listChat=getListChat();\n\n    async function sendMessage(){\n        await api.makeMessage(props.boardId,new Date().getTime(),msg); \n        ws.notifyChange(props.topicName);\n        setMsg('');\n    }\n\n    return (\n        <div className='chat-frame'>\n            <div className=\"list-chat\" id='listChat'>\n                {listChat}\n            </div>\n            <div className='text-box'>\n                <input \n                    className='message-text-box' \n                    onChange={(e)=>{\n                        setMsg(e.target.value);\n                    }}\n                    onKeyPress={(e)=>{\n                        if ((e.code || e.key)=='Enter'){\n                            // ENTER is pressed\n                            sendMessage();\n                        }\n                    }}\n                    type='text'\n                    value={msg}\n                />\n                <button className='send-button' onClick={sendMessage}>SEND</button>\n            </div>\n        </div>\n    );\n}\n\nexport default Chat;","D:\\CaroOnline\\src\\front-end\\src\\api\\userApi.js",["92"],"import axiosClient from \"./axiosClient\";\r\nimport axios from 'axios';\r\n\r\nconst userApi = {\r\n    login: async (username, password) => {\r\n        let response;\r\n        try {\r\n            response = await axios.post('http://localhost:3001/login', {\r\n                username: username,\r\n                password: password\r\n            })\r\n        } catch (e) {\r\n            response = e.response.data;\r\n        }\r\n        return response;\r\n    },\r\n    register: async (email, username, password) => {\r\n        const url = '/register';\r\n        const response = await axiosClient.post(url, {\r\n            email: email,\r\n            username: username,\r\n            password: password\r\n        });\r\n        return response;\r\n    },\r\n    validate: async (username) => {\r\n        const url = `/validate/${username}`;\r\n        const response = await axiosClient.post(url);\r\n        return response;\r\n    },\r\n    getAllBoards: async () => {\r\n        const url = '/board/get_all_boards';\r\n        let response;\r\n        try {\r\n            response = await axiosClient.get(url);\r\n        } catch (e){\r\n            response=e.response.data;\r\n        }\r\n        return response;\r\n    },\r\n    getBoard: async function (boardId) {\r\n        let boards = await this.getAllBoards();\r\n        if (boards.message){\r\n            return boards;\r\n        }\r\n        for (let i = 0; i < boards.length; i++) {\r\n            if (boards[i].boardId == boardId)\r\n                return boards[i];\r\n        }\r\n    },\r\n    takeTurn: async function (boardId, row, col) {\r\n        const url = `/board/make_turn?boardId=${boardId}&row=${row}&col=${col}`;\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    },\r\n    joinBoard: async function (boardId) {\r\n        const url = '/board/join_board?boardId=' + boardId;\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    },\r\n    createBoard: async function (boardId, name) {\r\n        const url = '/board/create_board?boardId=' + boardId + '&name=' + name;\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    },\r\n    getBoardChat: async function (boardId) {\r\n        const url = '/board/get_board_chat?boardId=' + boardId;\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    },\r\n    makeMessage: async function (boardId, time, content) {\r\n        const url = '/board/make_message?boardId=' + boardId + '&time=' + time + '&content=' + content;\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    },\r\n    getUsers: async function () {\r\n        const url = '/users';\r\n        const response = await axiosClient.get(url);\r\n        return response;\r\n    }\r\n}\r\n\r\nexport default userApi;","D:\\CaroOnline\\src\\front-end\\src\\api\\axiosClient.js",[],"D:\\CaroOnline\\src\\front-end\\src\\webSocketClient.js",[],"D:\\CaroOnline\\src\\front-end\\src\\components\\CheckMail\\index.js",["93","94"],"import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container:{\r\n        height: '500px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    notification:{\r\n        fontSize: '2.5vw',\r\n        textAlign: 'center'\r\n    }\r\n}));\r\n\r\nexport default function CheckMail(props) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <div className={classes.notification}>\r\n                <b>Register completed!</b>\r\n                <br/>\r\n                One more step, check out your mail to finish the comfirmation!\r\n            </div>\r\n        </div>\r\n    );\r\n}","D:\\CaroOnline\\src\\front-end\\src\\components\\MailValidate\\index.js",["95","96"],"import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport api from '../../api/userApi';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        height: '500px',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    notification: {\r\n        fontSize: '2.5vw',\r\n        textAlign: 'center'\r\n    },\r\n    loading: {\r\n        width: '1em',\r\n        height: '1em',\r\n        display: 'inline-block',\r\n        textAlign: 'left'\r\n    }\r\n}));\r\n\r\nlet createCallback=0;\r\nconst timeInterval=200;\r\n\r\nexport default function MailValidate(props) {\r\n    const classes = useStyles();\r\n    const [loading, setLoading] = useState('...');\r\n    const history = useHistory();\r\n\r\n    // update loading\r\n    let current=new Date().getTime();\r\n    // create only 1 callback at a time\r\n    if (current-createCallback>=timeInterval){\r\n        createCallback=current;\r\n        setTimeout(() => {\r\n            if (loading.length < 3) {\r\n                setLoading(loading + '.');\r\n            } else {\r\n                setLoading('');\r\n            }\r\n        }, timeInterval);\r\n    }\r\n\r\n    useEffect(async () => {\r\n        // get username from url\r\n        let username = (new URL(document.location)).searchParams.get('username');\r\n        // call api for validation\r\n        await api.validate(username);\r\n        // delete all local storages on App\r\n        localStorage.setItem(\"username\", \"\");\r\n        localStorage.setItem(\"loginStatus\", \"false\");\r\n        localStorage.setItem(\"token\", \"\");\r\n        setTimeout(() => history.push('/signin'), 5000);\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <div className={classes.notification}>\r\n                <b>Almost done!</b>\r\n                <br />\r\n                Wait for a moment <div className={classes.loading}>{loading}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}","D:\\CaroOnline\\src\\front-end\\src\\components\\Profile\\index.js",["97","98","99"],{"ruleId":"100","replacedBy":"101"},{"ruleId":"102","replacedBy":"103"},{"ruleId":"104","severity":1,"message":"105","line":51,"column":20,"nodeType":"106","messageId":"107","endLine":51,"endColumn":22},{"ruleId":"108","severity":1,"message":"109","line":81,"column":8,"nodeType":"110","endLine":81,"endColumn":10,"suggestions":"111"},{"ruleId":"100","replacedBy":"112"},{"ruleId":"102","replacedBy":"113"},{"ruleId":"108","severity":1,"message":"114","line":40,"column":8,"nodeType":"110","endLine":40,"endColumn":10,"suggestions":"115"},{"ruleId":"104","severity":1,"message":"116","line":55,"column":34,"nodeType":"106","messageId":"107","endLine":55,"endColumn":36},{"ruleId":"117","severity":1,"message":"118","line":83,"column":25,"nodeType":"119","messageId":"120","endLine":98,"endColumn":26},{"ruleId":"108","severity":1,"message":"109","line":109,"column":8,"nodeType":"110","endLine":109,"endColumn":10,"suggestions":"121"},{"ruleId":"104","severity":1,"message":"105","line":144,"column":31,"nodeType":"106","messageId":"107","endLine":144,"endColumn":33},{"ruleId":"104","severity":1,"message":"105","line":144,"column":84,"nodeType":"106","messageId":"107","endLine":144,"endColumn":86},{"ruleId":"104","severity":1,"message":"105","line":147,"column":31,"nodeType":"106","messageId":"107","endLine":147,"endColumn":33},{"ruleId":"104","severity":1,"message":"105","line":147,"column":84,"nodeType":"106","messageId":"107","endLine":147,"endColumn":86},{"ruleId":"104","severity":1,"message":"116","line":197,"column":38,"nodeType":"106","messageId":"107","endLine":197,"endColumn":40},{"ruleId":"122","severity":1,"message":"123","line":31,"column":11,"nodeType":"124","messageId":"125","endLine":31,"endColumn":18},{"ruleId":"108","severity":1,"message":"126","line":71,"column":8,"nodeType":"110","endLine":71,"endColumn":10,"suggestions":"127"},{"ruleId":"122","severity":1,"message":"128","line":1,"column":17,"nodeType":"124","messageId":"125","endLine":1,"endColumn":26},{"ruleId":"104","severity":1,"message":"116","line":14,"column":29,"nodeType":"106","messageId":"107","endLine":14,"endColumn":31},{"ruleId":"104","severity":1,"message":"116","line":73,"column":46,"nodeType":"106","messageId":"107","endLine":73,"endColumn":48},{"ruleId":"104","severity":1,"message":"116","line":47,"column":35,"nodeType":"106","messageId":"107","endLine":47,"endColumn":37},{"ruleId":"122","severity":1,"message":"129","line":1,"column":17,"nodeType":"124","messageId":"125","endLine":1,"endColumn":25},{"ruleId":"122","severity":1,"message":"128","line":1,"column":27,"nodeType":"124","messageId":"125","endLine":1,"endColumn":36},{"ruleId":"108","severity":1,"message":"130","line":47,"column":15,"nodeType":"131","endLine":57,"endColumn":6},{"ruleId":"108","severity":1,"message":"109","line":57,"column":8,"nodeType":"110","endLine":57,"endColumn":10,"suggestions":"132"},{"ruleId":"122","severity":1,"message":"128","line":1,"column":17,"nodeType":"124","messageId":"125","endLine":1,"endColumn":26},{"ruleId":"122","severity":1,"message":"129","line":1,"column":28,"nodeType":"124","messageId":"125","endLine":1,"endColumn":36},{"ruleId":"122","severity":1,"message":"133","line":11,"column":8,"nodeType":"124","messageId":"125","endLine":11,"endColumn":11},"no-native-reassign",["134"],"no-negated-in-lhs",["135"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["136"],["134"],["135"],"React Hook useEffect has missing dependencies: 'history' and 'token'. Either include them or remove the dependency array.",["137"],"Expected '===' and instead saw '=='.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase",["138"],"no-unused-vars","'classes' is assigned a value but never used.","Identifier","unusedVar","React Hook useEffect has missing dependencies: 'boardId' and 'history'. Either include them or remove the dependency array.",["139"],"'useEffect' is defined but never used.","'useState' is defined but never used.","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","ArrowFunctionExpression",["140"],"'api' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"141","fix":"142"},{"desc":"143","fix":"144"},{"desc":"141","fix":"145"},{"desc":"146","fix":"147"},{"desc":"141","fix":"148"},"Update the dependencies array to be: [history]",{"range":"149","text":"150"},"Update the dependencies array to be: [history, token]",{"range":"151","text":"152"},{"range":"153","text":"150"},"Update the dependencies array to be: [boardId, history]",{"range":"154","text":"155"},{"range":"156","text":"150"},[2245,2247],"[history]",[1199,1201],"[history, token]",[3484,3486],[2379,2381],"[boardId, history]",[1700,1702]]